<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IMEI Scanner â€” Buyer & Seller</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
  <script defer src="/static/config.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
  <script defer src="/static/app.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="brand">ðŸ“± IMEI Scanner</div>
    <div class="subtitle">Buyer / Seller â€” Scan, Copy, Save</div>
  </header>

  <main class="container">
    <section class="cards">
      <div class="card" id="card-buyer">
        <h2>Buyer</h2>
        <p class="muted">Scan IMEIs for a buyer and save with a name.</p>
        <div class="actions">
          <button class="btn primary" data-role="Buyer" id="btn-scan-buyer">Scan IMEI</button>
        </div>
        <div class="form">
          <label for="buyer-name">Buyer Name</label>
          <input id="buyer-name" type="text" placeholder="Enter buyer name" />

          <label>Detected IMEIs</label>
          <textarea id="buyer-imeis" rows="4" readonly placeholder="â€” none yet â€”"></textarea>
          <div class="row">
            <button class="btn" id="btn-copy-buyer">Copy</button>
            <button class="btn success" id="btn-save-buyer">Save to Google Sheet</button>
          </div>
        </div>
      </div>

      <div class="card" id="card-seller">
        <h2>Seller</h2>
        <p class="muted">Scan IMEIs for a seller and save with a name.</p>
        <div class="actions">
          <button class="btn primary" data-role="Seller" id="btn-scan-seller">Scan IMEI</button>
        </div>
        <div class="form">
          <label for="seller-name">Seller Name</label>
          <input id="seller-name" type="text" placeholder="Enter seller name" />

          <label>Detected IMEIs</label>
          <textarea id="seller-imeis" rows="4" readonly placeholder="â€” none yet â€”"></textarea>
          <div class="row">
            <button class="btn" id="btn-copy-seller">Copy</button>
            <button class="btn success" id="btn-save-seller">Save to Google Sheet</button>
          </div>
        </div>
      </div>
    </section>

    <section class="help">
      <details>
        <summary>Having trouble scanning?</summary>
        <ul>
          <li>Ensure good lighting and keep the IMEI text in focus.</li>
          <li>Move closer or further so the text is sharp.</li>
          <li>Try scanning the barcode/label side where IMEI is printed.</li>
          <li>On iOS/Android, use HTTPS or run on localhost to access camera.</li>
        </ul>
      </details>
    </section>
  </main>

  <!-- Camera Modal -->
  <div class="modal" id="camera-modal" hidden>
    <div class="modal-content">
      <div class="modal-head">
        <h3>Scan IMEI (<span id="scan-role">Role</span>)</h3>
        <button class="icon-btn" id="btn-close-modal" aria-label="Close">âœ–</button>
      </div>
      <div class="video-wrap">
        <video id="video" playsinline></video>
        <canvas id="canvas" hidden></canvas>
      </div>
      <div class="modal-actions">
        <button class="btn" id="btn-capture">Scan</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" hidden></div>
  <div class="overlay" id="overlay" hidden>
    <div class="spinner"></div>
    <div class="overlay-text">Processingâ€¦</div>
  </div>
</body>
</html>
